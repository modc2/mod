networks:
  default:
    external: true
    name: modnet
services:
  ipfs:
    container_name: ipfs
    deploy: {}
    entrypoint: bash -c "m serve port=50068 key=ipfs remote=0 mod=ipfs"
    image: ipfs
    ports:
    - 50068:50068
    restart: unless-stopped
    shm_size: 100g
    volumes:
    - ~/mod:/root/mod
    - ~/.mod:/root/.mod
    - ~/mod/mod/_mods/ipfs:/root/mod/mod/_mods/ipfs
    working_dir: /root/mod/mod/_mods/ipfs
  ipfs.node:
    container_name: ipfs.node
    image: ipfs/go-ipfs:latest
    networks:
    - default
    ports:
    - 5001:5001
    - 4001:4001
    - 8080:8080
    restart: unless-stopped
    volumes:
    - ~/.ipfs/archive:/data/ipfs
    - ~/.ipfs/data:/data/ipfs
version: '3.8'
